<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Weather</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous" />
    <link rel="stylesheet" href="css/weather.css">



</head>
<body>

    <main>
        <div class="container">
        <h1>Weather Application</h1>
            <div class="row">
                <div class="col-lg-3">
                    <div id="weather"></div>
                </div>
            </div>
            <div>
                <div id="map"></div>
            </div>
        </div>
    </main>





    <!--jQuery-->
<script
        src="https://code.jquery.com/jquery-2.2.4.js"
        integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI="
        crossorigin="anonymous">
</script>
    <!--map-->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBIp5Ig5kgI1P0nWd4BDrTHIAzZVvg6mjA"></script>
    <!--bootstrap-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


    <!--use 5 day/daily forecast-->
<script>


function updatePage(weather) {

    var request = $.get("http://api.openweathermap.org/data/2.5/forecast", {
        APPID: "5f24466c0d7a3151b3d11aa2dba9c34f",
        //could potentially do lat/long instead of city (lat: long:)
        lat:    29.423017,
        lon:   -98.48527,
        // q:"San Antonio",
        //to get degrees in f
        units: "imperial"
    });

    request.done(function(weather) {
        buildHTML(weather);
    });


    request.fail(function (status){
        console.log(status);
    });
}
updatePage();


    // //need to call the function to direct the request where to go
    // request.done(function(weather){
    //     console.log(weather);
    //     //to pull a specific value
    //     // console.log(weather.main.humidity);
    // });








function buildHTML(input) {
    var html = "";
    for (var i = 4; i < 24; i+= 8) {
        html += "<h2>" + parseInt(input.list[i].main.temp_min) + "°F" + "/"+ parseInt(input.list[i].main.temp_max) + "°F"+ "</h2>";
        html += "<p>" + "<img src='http://openweathermap.org/img/w/" + input.list[i].weather[0].icon + ".png'>" + "</p>";
        html += "<p>" +   input.list[i].weather[0].main +  ": " + input.list[i].weather[0].description + "</p>";
        html += "<p>" + "Humidity: " + input.list[i].main.humidity +  "</p>";
        html += "<p>" + "Wind: " + input.list[i].wind.speed +  "</p>";
        html += "<p>" + "Pressure: " + input.list[i].main.pressure +  "</p>";

    }
    $("#weather").html(html);
}







//maps
var mapDisplay = document.getElementById('map');


//these have to be defined
var options = {
    zoom: 15,
    center: {
        lat: 31.9686,
        lng: -99.9018
    }
};


var map = new google.maps.Map(mapDisplay, options);


//insert function here
var geocoder = new google.maps.Geocoder();




geocoder.geocode({
    address: "san antonio"
}, function(results, status) {
    if (status === "OK") {

        var marker = new google.maps.Marker({
            position: results[0].geometry.location,
            map: map,
            draggable: true,



        });
        map.setCenter(results[0].geometry.location);

    }
});




















</script>
</body>
</html>